buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath 'com.android.tools.build:gradle:0.13.2'
  }
}

allprojects {
  repositories {
    jcenter()
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.1'
}

task assembleExample(type: Exec) {
  workingDir = project.file('./')
  commandLine 'gradlew', '-q', 'clean', 'assembleDebug', '-x', 'lint', 'install'
  doFirst {
    println '====== Assembling Gandalf ======'
  }
  doLast {
    println '====== Gandalf Assembled! ======'
  }
}

task installExample(type: Exec) {
  workingDir = project.file('./')
  commandLine 'gradlew', '-q', 'clean', 'assembleDebug', '-x', 'lint', 'install', 'installDebug'
  doFirst {
    println '====== Installing Gandalf ======'
  }
  doLast {
    println '====== Gandalf Installed! ======'
  }
}

task executeGandalfTests(type: Exec) {
  executable = '../gradlew'
  workingDir = project.file('gandalf-library')
  args = ['-q', 'clean', 'assembleDebug', 'assembleDebugTest', '-x', 'lint']
  doFirst {
    println '====== Executing Gandalf Tests ======'
  }
  doLast {
    println '====== Gandalf Tests Executed ======'
  }
}

task executeGandalfPluginTests(type: Exec) {
  executable = '../gradlew'
  workingDir = project.file('gandalf-plugin')
  args = ['-q', 'clean', 'build']
  doFirst {
    println '====== Building Gandalf Gradle Plugin and Executing Tests ======'
  }
  doLast {
    println '====== Gandalf Gradle Plugin Built Successfully ======'
  }
}